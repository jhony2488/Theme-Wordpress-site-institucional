(function(){"use strict";var t,s,a,i,r,n,u,l,o,h,m,d,p,A,v,g,b,f,c,x,y,F,_,D,C,R,k,z;function e(t,e){this.parser=t}(s=this).hatemile||(this.hatemile={}),(t=this.hatemile).implementation||(t.implementation={}),this.hatemile.implementation.AccessibleFormImplementation=(d="data-invalidurl",r="data-invalidemail",o="data-invalidrange",n="data-invalidlength",l="data-invalidpattern",h="data-invalidrequired",a="data-invaliddate",m="data-invalidtime",i="data-invaliddatetime",u="data-invalidmonth",p="data-invalidweek",A="type",v=function(t){return!t.hasAttribute(d)&&(!t.hasAttribute(r)&&(!t.hasAttribute(o)&&(!t.hasAttribute(n)&&(!t.hasAttribute(l)&&(!t.hasAttribute(h)&&(!t.hasAttribute(a)&&(!t.hasAttribute(m)&&(!t.hasAttribute(i)&&(!t.hasAttribute(u)&&!t.hasAttribute(p))))))))))},z=function(t,e,a){a(t)?t.hasAttribute(e)&&(t.removeAttribute(e),t.hasAttribute("aria-invalid")&&v(t)&&t.removeAttribute("aria-invalid")):(t.setAttribute(e,"true"),t.setAttribute("aria-invalid","true"))},_=function(t,e){return new RegExp(e).test(t)},R=function(t){return 0===t.getData().value.length||_(t.getData().value,"([a-zA-Z][a-zA-Z0-9\\+\\.\\-]*):(\\/\\/)?(?:(?:(?:[a-zA-Z0-9_\\.\\-\\+!$&'\\(\\)*\\+,;=]|%[0-9a-f]{2})+:)*(?:[a-zA-Z0-9_\\.\\-\\+%!$&'\\(\\)*\\+,;=]|%[0-9a-f]{2})+@)?(?:(?:[a-z0-9\\-\\.]|%[0-9a-f]{2})+|(?:\\[(?:[0-9a-f]{0,4}:)*(?:[0-9a-f]{0,4})\\]))(?::[0-9]+)?(?:[\\/|\\?](?:[a-zA-Z0-9_#!:\\.\\?\\+=&@!$'~*,;\\/\\(\\)\\[\\]\\-]|%[0-9a-f]{2})*)?")},f=function(t){var e="(?:[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])";return t.hasAttribute("multiple")&&(e=e+"( *, *"+e+")*"),0===t.getData().value.length||_(t.getData().value,"^("+e+")?$")},g=function(t){return 0===t.getData().value.length||_(t.getData().value,"^([0-9]{2}(((([02468][048])|([13579][26]))-(02)-((0[1-9])|([12][0-9])))|(([0-9]{2})-((02-((0[1-9])|(1[0-9])|(2[0-8])))|(((0[469])|(11))-((0[1-9])|([12][0-9])|(30)))|(((0[13578])|(10)|(12))-((0[1-9])|([12][0-9])|(3[01])))))))?$")},C=function(t){return 0===t.getData().value.length||_(t.getData().value,"^((([01][0-9])|(2[0-3])):[0-5][0-9])?$")},b=function(t){return 0===t.getData().value.length||_(t.getData().value,"^([0-9]{2}(((([02468][048])|([13579][26]))-(02)-((0[1-9])|([12][0-9])))|(([0-9]{2})-((02-((0[1-9])|(1[0-9])|(2[0-8])))|(((0[469])|(11))-((0[1-9])|([12][0-9])|(30)))|(((0[13578])|(10)|(12))-((0[1-9])|([12][0-9])|(3[01]))))))T(([01][0-9])|(2[0-3])):[0-5][0-9]((:[0-5][0-9].[0-9])|(Z))?)?$")},x=function(t){return 0===t.getData().value.length||_(t.getData().value,"^([0-9]{4}-((0[1-9])|(1[0-2])))?$")},k=function(t){return 0===t.getData().value.length||_(t.getData().value,"^([0-9]{4}-W((0[1-9])|([1-4][0-9])|(5[0-3])))?$")},F=function(t){var e,a,i;if(0<t.getData().value.length){if(!_(t.getData().value,"^[-+]?[0-9]+([.,][0-9]+)?$"))return!1;if(i=parseFloat(t.getData().value),(t.hasAttribute("min")||t.hasAttribute("aria-valuemin"))&&(t.hasAttribute("min")?a=parseFloat(t.getAttribute("min")):t.hasAttribute("aria-valuemin")&&(a=parseFloat(t.getAttribute("aria-valuemin"))),i<a))return!1;if((t.hasAttribute("max")||t.hasAttribute("aria-valuemax"))&&(t.hasAttribute("max")?e=parseFloat(t.getAttribute("max")):t.hasAttribute("aria-valuemax")&&(e=parseFloat(t.getAttribute("aria-valuemax"))),e<i))return!1}return!0},c=function(t){return!(t.hasAttribute("minlength")&&t.getData().value.length<parseInt(t.getAttribute("minlength")))&&!(t.hasAttribute("maxlength")&&t.getData().value.length>parseInt(t.getAttribute("maxlength")))},y=function(t){return _(t.getData().value,t.getAttribute("pattern"))},D=function(t){return 0<t.getData().value.length},e.prototype._getARIAAutoComplete=function(t){var e,a,i=t.getTagName();if(t.hasAttribute("type")&&(e=t.getAttribute("type").toLowerCase()),"TEXTAREA"===i||"INPUT"===i&&"button"!==e&&"submit"!==e&&"reset"!==e&&"image"!==e&&"file"!==e&&"checkbox"!==e&&"radio"!==e&&"hidden"!==e){if(t.hasAttribute("autocomplete")?a=t.getAttribute("autocomplete").toLowerCase():(null===(e=this.parser.find(t).findAncestors("form").firstResult())&&t.hasAttribute("form")&&(e=this.parser.find("#"+t.getAttribute("form")).firstResult()),null!==e&&e.hasAttribute("autocomplete")&&(a=e.getAttribute("autocomplete").toLowerCase())),"on"===a)return"both";if(t.hasAttribute("list")&&null!==this.parser.find('datalist[id="'+t.getAttribute("list")+'"]').firstResult())return"list";if("off"===a)return"none"}return null},e.prototype._hasEvent=function(t,e,a,i){var r=t.getData();return void 0===a||void 0===i?r["on"+e]instanceof Function||void 0!==r.eventListenerList&&r.eventListenerList[e]instanceof Function:(r=t.getAttribute(a),this._hasEvent(t,e)&&!t.hasAttribute(a)||s.hatemile.util.CommonFunctions.inList(r,i))},e.prototype._addEventHandler=function(t,r,e,a,i){var n,u,l;this._hasEvent(t,r,e,a)||(u=!1,n=t.getAttribute(e),l=t.getData(),this._hasEvent(t,r)?u=s.hatemile.util.CommonFunctions.inList(n,a):(l["liston"+r]=[],l["on"+r]=function(t){for(var e=l["liston"+r],a=0,i=e.length;a<i;a++)(0,e[a])(t)}),u||(l["liston"+r].push(i),n=s.hatemile.util.CommonFunctions.increaseInList(n,a),t.setAttribute(e,n)))},e.prototype._validate=function(e,a,t,i){z(e,a,i),this._addEventHandler(e,"change","data-changeadded",t,function(t){return z(e,a,i)})},e.prototype.markRequiredField=function(t){t.hasAttribute("required")&&t.setAttribute("aria-required","true")},e.prototype.markAllRequiredFields=function(){for(var t,e=this.parser.find("[required]").listResults(),a=0,i=e.length;a<i;a++)t=e[a],s.hatemile.util.CommonFunctions.isValidElement(t)&&this.markRequiredField(t)},e.prototype.markRangeField=function(t){t.hasAttribute("min")&&t.setAttribute("aria-valuemin",t.getAttribute("min")),t.hasAttribute("max")&&t.setAttribute("aria-valuemax",t.getAttribute("max"))},e.prototype.markAllRangeFields=function(){for(var t,e=this.parser.find("[min],[max]").listResults(),a=0,i=e.length;a<i;a++)t=e[a],s.hatemile.util.CommonFunctions.isValidElement(t)&&this.markRangeField(t)},e.prototype.markAutoCompleteField=function(t){var e=this._getARIAAutoComplete(t);null!==e&&t.setAttribute("aria-autocomplete",e)},e.prototype.markAllAutoCompleteFields=function(){for(var t,e=this.parser.find("input[autocomplete],textarea[autocomplete],form[autocomplete] input,form[autocomplete] textarea,[list],[form]").listResults(),a=0,i=e.length;a<i;a++)t=e[a],s.hatemile.util.CommonFunctions.isValidElement(t)&&this.markAutoCompleteField(t)},e.prototype.markInvalidField=function(t){var e;(t.hasAttribute("required")||t.hasAttribute("aria-required")&&"true"===t.getAttribute("aria-required").toLowerCase())&&this._validate(t,h,"required",D),t.hasAttribute("pattern")&&this._validate(t,l,"pattern",y),(t.hasAttribute("minlength")||t.hasAttribute("maxlength"))&&this._validate(t,n,"length",c),(t.hasAttribute("aria-valuemin")||t.hasAttribute("aria-valuemax"))&&this._validate(t,o,A,F),t.hasAttribute("type")&&("week"===(e=t.getAttribute("type").toLowerCase())?this._validate(t,p,A,k):"month"===e?this._validate(t,u,A,x):"datetime-local"===e||"datetime"===e?this._validate(t,i,A,b):"time"===e?this._validate(t,m,A,C):"date"===e?this._validate(t,a,A,g):"number"===e||"range"===e?this._validate(t,o,A,F):"email"===e?this._validate(t,r,A,f):"url"===e&&this._validate(t,d,A,R))},e.prototype.markAllInvalidFields=function(){for(var t,e=this.parser.find("[required],input[pattern],input[minlength],input[maxlength],textarea[minlength],textarea[maxlength],input[type=week],input[type=month],input[type=datetime-local],input[type=datetime],input[type=time],input[type=date],input[type=number],input[type=range],input[type=email],input[type=url],[aria-required=true],input[aria-valuemin],input[aria-valuemax]").listResults(),a=0,i=e.length;a<i;a++)t=e[a],s.hatemile.util.CommonFunctions.isValidElement(t)&&this.markInvalidField(t)},e)}).call(this);