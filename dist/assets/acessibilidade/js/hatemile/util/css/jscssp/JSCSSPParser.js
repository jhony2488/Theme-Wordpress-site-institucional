(function(){"use strict";var t,o,h,s,l;function e(t,e){this.parser=t,this.currentURL=e,this.parser instanceof jscsspStylesheet||(e=new CSSParser,this.parser.find instanceof Function&&this.parser.listResults instanceof Function&&this.parser.getParser instanceof Function&&(this.parser=s(this.parser,this.currentURL)),"string"==typeof this.parser&&(this.parser=e.parse("body{}"+this.parser,!1,!1)))}(o=this).hatemile||(this.hatemile={}),(t=this.hatemile).util||(t.util={}),(t=this.hatemile.util).css||(t.css={}),(t=this.hatemile.util.css).jscssp||(t.jscssp={}),this.hatemile.util.css.jscssp.JSCSSPParser=(h=function(t,e){var s,i,r,n,a;if(0===e.indexOf("//"))return 0===t.indexOf("https://")?"https:"+e:"http:"+e;if(0===e.indexOf("data:"))return null;if(new RegExp("([a-zA-Z][a-zA-Z0-9\\+\\.\\-]*):(\\/\\/)?(?:(?:(?:[a-zA-Z0-9_\\.\\-\\+!$&'\\(\\)*\\+,;=]|%[0-9a-f]{2})+:)*(?:[a-zA-Z0-9_\\.\\-\\+%!$&'\\(\\)*\\+,;=]|%[0-9a-f]{2})+@)?(?:(?:[a-z0-9\\-\\.]|%[0-9a-f]{2})+|(?:\\[(?:[0-9a-f]{0,4}:)*(?:[0-9a-f]{0,4})\\]))(?::[0-9]+)?(?:[\\/|\\?](?:[a-zA-Z0-9_#!:\\.\\?\\+=&@!$'~*,;\\/\\(\\)\\[\\]\\-]|%[0-9a-f]{2})*)?").test(e))return e;if((a=t.split("/")).pop(),0===e.indexOf("/"))return a[0]+"//"+a[2]+e;for(s=0,i=(n=e.split("/")).length;s<i;s++)".."===(r=n[s])?a.pop():"."!==r&&a.push(r);return a.join("/")},s=function(t,e){for(var s,i="",r=t.find("style,link[rel=stylesheet]").listResults(),n=0,a=r.length;n<a;n++)"STYLE"===(s=r[n]).getTagName()&&(i+=s.getTextContent()),s.hasAttribute("rel")&&"stylesheet"===s.getAttribute("rel")&&(i+=l(h(e,s.getAttribute("href"))));return i},l=function(t){var e,s="";if(0<t.length){if(e=!1,window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){0;try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){0}}e&&(e.onreadystatechange=function(){if(4===this.readyState&&200===this.status)return s=e.responseText},e.open("GET",t,!1),e.send())}return s},e.prototype.getRules=function(t){var e,s,i,r,n,a,h,l,u,c,f,p=[];if(void 0===t||0===t.length)for(e=0,r=(u=this.parser.cssRules).length;e<r;e++)1===(h=u[e]).type&&p.push(new o.hatemile.util.css.jscssp.JSCSSPRule(h));else for(s=0,n=(c=this.parser.cssRules).length;s<n;s++)if(1===(h=c[s]).type)for(f=new o.hatemile.util.css.jscssp.JSCSSPRule(h),i=0,a=t.length;i<a;i++)if(l=t[i],f.hasProperty(l)){p.push(f);break}return p},e)}).call(this);